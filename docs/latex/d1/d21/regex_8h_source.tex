\doxysection{regex.\+h}
\hypertarget{regex_8h_source}{}\label{regex_8h_source}\index{lib/cereal/external/rapidjson/internal/regex.h@{lib/cereal/external/rapidjson/internal/regex.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ Tencent\ is\ pleased\ to\ support\ the\ open\ source\ community\ by\ making\ RapidJSON\ available.}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ Copyright\ (C)\ 2015\ THL\ A29\ Limited,\ a\ Tencent\ company,\ and\ Milo\ Yip.\ All\ rights\ reserved.}}
\DoxyCodeLine{00004\ \textcolor{comment}{//}}
\DoxyCodeLine{00005\ \textcolor{comment}{//\ Licensed\ under\ the\ MIT\ License\ (the\ "{}License"{});\ you\ may\ not\ use\ this\ file\ except}}
\DoxyCodeLine{00006\ \textcolor{comment}{//\ in\ compliance\ with\ the\ License.\ You\ may\ obtain\ a\ copy\ of\ the\ License\ at}}
\DoxyCodeLine{00007\ \textcolor{comment}{//}}
\DoxyCodeLine{00008\ \textcolor{comment}{//\ http://opensource.org/licenses/MIT}}
\DoxyCodeLine{00009\ \textcolor{comment}{//}}
\DoxyCodeLine{00010\ \textcolor{comment}{//\ Unless\ required\ by\ applicable\ law\ or\ agreed\ to\ in\ writing,\ software\ distributed\ }}
\DoxyCodeLine{00011\ \textcolor{comment}{//\ under\ the\ License\ is\ distributed\ on\ an\ "{}AS\ IS"{}\ BASIS,\ WITHOUT\ WARRANTIES\ OR\ }}
\DoxyCodeLine{00012\ \textcolor{comment}{//\ CONDITIONS\ OF\ ANY\ KIND,\ either\ express\ or\ implied.\ See\ the\ License\ for\ the\ }}
\DoxyCodeLine{00013\ \textcolor{comment}{//\ specific\ language\ governing\ permissions\ and\ limitations\ under\ the\ License.}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#ifndef\ CEREAL\_RAPIDJSON\_INTERNAL\_REGEX\_H\_}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#define\ CEREAL\_RAPIDJSON\_INTERNAL\_REGEX\_H\_}}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}../allocators.h"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}../stream.h"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}stack.h"{}}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#ifdef\ \_\_clang\_\_}}
\DoxyCodeLine{00023\ CEREAL\_RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{00024\ CEREAL\_RAPIDJSON\_DIAG\_OFF(padded)}
\DoxyCodeLine{00025\ CEREAL\_RAPIDJSON\_DIAG\_OFF(\textcolor{keywordflow}{switch}-\/\textcolor{keyword}{enum})}
\DoxyCodeLine{00026\ CEREAL\_RAPIDJSON\_DIAG\_OFF(implicit-\/fallthrough)}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#elif\ defined(\_MSC\_VER)}}
\DoxyCodeLine{00028\ CEREAL\_RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{00029\ CEREAL\_RAPIDJSON\_DIAG\_OFF(4512)\ \textcolor{comment}{//\ assignment\ operator\ could\ not\ be\ generated}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#ifdef\ \_\_GNUC\_\_}}
\DoxyCodeLine{00033\ CEREAL\_RAPIDJSON\_DIAG\_PUSH}
\DoxyCodeLine{00034\ CEREAL\_RAPIDJSON\_DIAG\_OFF(effc++)}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#if\ \_\_GNUC\_\_\ >=\ 7}}
\DoxyCodeLine{00036\ CEREAL\_RAPIDJSON\_DIAG\_OFF(implicit-\/fallthrough)}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#ifndef\ CEREAL\_RAPIDJSON\_REGEX\_VERBOSE}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ CEREAL\_RAPIDJSON\_REGEX\_VERBOSE\ 0}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga69bf61966c74b09b5d90b386847f39be}{CEREAL\_RAPIDJSON\_NAMESPACE\_BEGIN}}}
\DoxyCodeLine{00045\ \textcolor{keyword}{namespace\ }internal\ \{}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00048\ \textcolor{comment}{//\ DecodedStream}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ SourceStream,\ \textcolor{keyword}{typename}\ Encoding>}
\DoxyCodeLine{00051\ \textcolor{keyword}{class\ }DecodedStream\ \{}
\DoxyCodeLine{00052\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00053\ \ \ \ \ DecodedStream(SourceStream\&\ ss)\ :\ ss\_(ss),\ codepoint\_()\ \{\ Decode();\ \}}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ Peek()\ \{\ \textcolor{keywordflow}{return}\ codepoint\_;\ \}}
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ Take()\ \{}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ c\ =\ codepoint\_;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c)\ \textcolor{comment}{//\ No\ further\ decoding\ when\ '\(\backslash\)0'}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ Decode();}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ c;}
\DoxyCodeLine{00060\ \ \ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keywordtype}{void}\ Decode()\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Encoding::Decode(ss\_,\ \&codepoint\_))}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ codepoint\_\ =\ 0;}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ SourceStream\&\ ss\_;}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint\_;}
\DoxyCodeLine{00070\ \};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \textcolor{comment}{//\ GenericRegex}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ kRegexInvalidState\ =\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{\string~SizeType}}(0);\ \ }
\DoxyCodeLine{00076\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ kRegexInvalidRange\ =\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{\string~SizeType}}(0);}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Encoding,\ \textcolor{keyword}{typename}\ Allocator>}
\DoxyCodeLine{00079\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classinternal_1_1_generic_regex_search}{GenericRegexSearch}};}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00113\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Encoding,\ \textcolor{keyword}{typename}\ Allocator\ =\ CrtAllocator>}
\DoxyCodeLine{00114\ \textcolor{keyword}{class\ }GenericRegex\ \{}
\DoxyCodeLine{00115\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classrapidjson_1_1_encoding}{Encoding}}\ EncodingType;}
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Encoding::Ch\ Ch;}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename},\ \textcolor{keyword}{typename}>\ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }GenericRegexSearch;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ GenericRegex(\textcolor{keyword}{const}\ Ch*\ source,\ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ allocator\ =\ 0)\ :\ }
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ ownAllocator\_(allocator\ ?\ 0\ :\ \mbox{\hyperlink{rapidjson_8h_a7534610ea72614148b80e56a1d030d4d}{CEREAL\_RAPIDJSON\_NEW}}(\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}})()),\ allocator\_(allocator\ ?\ allocator\ :\ ownAllocator\_),\ }
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ states\_(allocator\_,\ 256),\ ranges\_(allocator\_,\ 256),\ root\_(kRegexInvalidState),\ stateCount\_(),\ rangeCount\_(),\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ anchorBegin\_(),\ anchorEnd\_()}
\DoxyCodeLine{00124\ \ \ \ \ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}}\ ss(source);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<GenericStringStream<Encoding>}},\ \mbox{\hyperlink{classrapidjson_1_1_encoding}{Encoding}}>\ ds(ss);}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ Parse(ds);}
\DoxyCodeLine{00128\ \ \ \ \ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \ \ \ \ \string~GenericRegex()}
\DoxyCodeLine{00131\ \ \ \ \ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a423256b968105e87ee4cf34bee2dfed4}{CEREAL\_RAPIDJSON\_DELETE}}(ownAllocator\_);}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{bool}\ IsValid()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ root\_\ !=\ kRegexInvalidState;}
\DoxyCodeLine{00137\ \ \ \ \ \}}
\DoxyCodeLine{00138\ }
\DoxyCodeLine{00139\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keyword}{enum}\ Operator\ \{}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ kZeroOrOne,}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ kZeroOrMore,}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ kOneOrMore,}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ kConcatenation,}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ kAlternation,}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ kLeftParenthesis}
\DoxyCodeLine{00147\ \ \ \ \ \};}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ kAnyCharacterClass\ =\ 0xFFFFFFFF;\ \ \ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ kRangeCharacterClass\ =\ 0xFFFFFFFE;}
\DoxyCodeLine{00151\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ kRangeNegationFlag\ =\ 0x80000000;}
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00153\ \ \ \ \ \textcolor{keyword}{struct\ }Range\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ start;\ \textcolor{comment}{//\ }}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ end;}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ next;}
\DoxyCodeLine{00157\ \ \ \ \ \};}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keyword}{struct\ }State\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ out;\ \ \ \ \ }
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ out1;\ \ \ \ }
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ rangeStart;}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint;}
\DoxyCodeLine{00164\ \ \ \ \ \};}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \textcolor{keyword}{struct\ }Frag\ \{}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ Frag(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ o,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ m)\ :\ start(s),\ out(o),\ minIndex(m)\ \{\}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ start;}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ out;\ }
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ minIndex;}
\DoxyCodeLine{00171\ \ \ \ \ \};}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ State\&\ GetState(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ index)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(index\ <\ stateCount\_);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ states\_.template\ Bottom<State>()[index];}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keyword}{const}\ State\&\ GetState(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(index\ <\ stateCount\_);}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ states\_.template\ Bottom<State>()[index];}
\DoxyCodeLine{00181\ \ \ \ \ \}}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ Range\&\ GetRange(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ index)\ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(index\ <\ rangeCount\_);}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ranges\_.template\ Bottom<Range>()[index];}
\DoxyCodeLine{00186\ \ \ \ \ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keyword}{const}\ Range\&\ GetRange(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(index\ <\ rangeCount\_);}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ranges\_.template\ Bottom<Range>()[index];}
\DoxyCodeLine{00191\ \ \ \ \ \}}
\DoxyCodeLine{00192\ }
\DoxyCodeLine{00193\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordtype}{void}\ Parse(\mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream,\ Encoding>}}\&\ ds)\ \{}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ operandStack(allocator\_,\ 256);\ \ \ \ \textcolor{comment}{//\ Frag}}
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ operatorStack(allocator\_,\ 256);\ \ \ \textcolor{comment}{//\ Operator}}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ atomCountStack(allocator\_,\ 256);\ \ \textcolor{comment}{//\ unsigned\ (Atom\ per\ parenthesis)}}
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ *atomCountStack.template\ Push<unsigned>()\ =\ 0;}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint;}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (ds.Peek()\ !=\ 0)\ \{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (codepoint\ =\ ds.Take())\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\string^'}:}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ anchorBegin\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ anchorEnd\_\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'|'}:}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!operatorStack.Empty()\ \&\&\ *operatorStack.template\ Top<Operator>()\ <\ kAlternation)}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ *operatorStack.template\ Pop<Operator>(1)))}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operatorStack.template\ Push<Operator>()\ =\ kAlternation;}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *atomCountStack.template\ Top<unsigned>()\ =\ 0;}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'('}:}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operatorStack.template\ Push<Operator>()\ =\ kLeftParenthesis;}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *atomCountStack.template\ Push<unsigned>()\ =\ 0;}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{')'}:}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!operatorStack.Empty()\ \&\&\ *operatorStack.template\ Top<Operator>()\ !=\ kLeftParenthesis)}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ *operatorStack.template\ Pop<Operator>(1)))}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operatorStack.Empty())}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operatorStack.template\ Pop<Operator>(1);}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ atomCountStack.template\ Pop<unsigned>(1);}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImplicitConcatenation(atomCountStack,\ operatorStack);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ kZeroOrOne))}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ kZeroOrMore))}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ kOneOrMore))}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\{'}:}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ n,\ m;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ParseUnsigned(ds,\ \&n))}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ds.Peek()\ ==\ \textcolor{charliteral}{','})\ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ds.Take();}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ds.Peek()\ ==\ \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ kInfinityQuantifier;}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!ParseUnsigned(ds,\ \&m)\ ||\ m\ <\ n)}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ n;}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!EvalQuantifier(operandStack,\ n,\ m)\ ||\ ds.Peek()\ !=\ \textcolor{charliteral}{'\}'})}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ds.Take();}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PushOperand(operandStack,\ kAnyCharacterClass);}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImplicitConcatenation(atomCountStack,\ operatorStack);}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'['}:}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ range;}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ParseRange(ds,\ \&range))}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(kRegexInvalidState,\ kRegexInvalidState,\ kRangeCharacterClass);}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetState(s).rangeStart\ =\ range;}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(s,\ s,\ s);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImplicitConcatenation(atomCountStack,\ operatorStack);}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:\ \textcolor{comment}{//\ Escape\ character}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!CharacterEscape(ds,\ \&codepoint))}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};\ \textcolor{comment}{//\ Unsupported\ escape\ character}}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fall\ through\ to\ default}}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ \textcolor{comment}{//\ Pattern\ character}}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ PushOperand(operandStack,\ codepoint);}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImplicitConcatenation(atomCountStack,\ operatorStack);}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!operatorStack.Empty())}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!Eval(operandStack,\ *operatorStack.template\ Pop<Operator>(1)))}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Link\ the\ operand\ to\ matching\ state.}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operandStack.GetSize()\ ==\ \textcolor{keyword}{sizeof}(Frag))\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ Frag*\ e\ =\ operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ Patch(e-\/>out,\ NewState(kRegexInvalidState,\ kRegexInvalidState,\ 0));}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ root\_\ =\ e-\/>start;}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \textcolor{preprocessor}{\#if\ CEREAL\_RAPIDJSON\_REGEX\_VERBOSE}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}root:\ \%d\(\backslash\)n"{}},\ root\_);}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ i\ =\ 0;\ i\ <\ stateCount\_\ ;\ i++)\ \{}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ State\&\ s\ =\ GetState(i);}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}[\%2d]\ out:\ \%2d\ out1:\ \%2d\ c:\ '\%c'\(\backslash\)n"{}},\ i,\ s.out,\ s.out1,\ (\textcolor{keywordtype}{char})s.codepoint);}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00318\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00320\ \ \ \ \ \}}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ NewState(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ out,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ out1,\ \textcolor{keywordtype}{unsigned}\ codepoint)\ \{}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ State*\ s\ =\ states\_.template\ Push<State>();}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ s-\/>out\ =\ out;}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ s-\/>out1\ =\ out1;}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ s-\/>codepoint\ =\ codepoint;}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ s-\/>rangeStart\ =\ kRegexInvalidRange;}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ stateCount\_++;}
\DoxyCodeLine{00329\ \ \ \ \ \}}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ \textcolor{keywordtype}{void}\ PushOperand(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ operandStack,\ \textcolor{keywordtype}{unsigned}\ codepoint)\ \{}
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(kRegexInvalidState,\ kRegexInvalidState,\ codepoint);}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(s,\ s,\ s);}
\DoxyCodeLine{00334\ \ \ \ \ \}}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{void}\ ImplicitConcatenation(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ atomCountStack,\ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ operatorStack)\ \{}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (*atomCountStack.template\ Top<unsigned>())}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ *operatorStack.template\ Push<Operator>()\ =\ kConcatenation;}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ (*atomCountStack.template\ Top<unsigned>())++;}
\DoxyCodeLine{00340\ \ \ \ \ \}}
\DoxyCodeLine{00341\ }
\DoxyCodeLine{00342\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ Append(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ l1,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ l2)\ \{}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ old\ =\ l1;}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (GetState(l1).out\ !=\ kRegexInvalidState)}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ l1\ =\ GetState(l1).out;}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ GetState(l1).out\ =\ l2;}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ old;}
\DoxyCodeLine{00348\ \ \ \ \ \}}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keywordtype}{void}\ Patch(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ l,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s)\ \{}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ next;\ l\ !=\ kRegexInvalidState;\ l\ =\ next)\ \{}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ next\ =\ GetState(l).out;}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ GetState(l).out\ =\ s;}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ \ \ \ \ \}}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keywordtype}{bool}\ Eval(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ operandStack,\ Operator\ op)\ \{}
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (op)\ \{}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ kConcatenation:}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag)\ *\ 2);}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e2\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e1\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Patch(e1.out,\ e2.start);}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(e1.start,\ e2.out,\ Min(e1.minIndex,\ e2.minIndex));}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00368\ }
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ kAlternation:}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag)\ *\ 2)\ \{}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e2\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e1\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(e1.start,\ e2.start,\ 0);}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(s,\ Append(e1.out,\ e2.out),\ Min(e1.minIndex,\ e2.minIndex));}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ kZeroOrOne:}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag))\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(kRegexInvalidState,\ e.start,\ 0);}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(s,\ Append(e.out,\ s),\ e.minIndex);}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ kZeroOrMore:}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag))\ \{}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(kRegexInvalidState,\ e.start,\ 0);}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Patch(e.out,\ s);}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(s,\ s,\ e.minIndex);}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ kOneOrMore:}
\DoxyCodeLine{00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag))\ \{}
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Frag\ e\ =\ *operandStack.template\ Pop<Frag>(1);}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ s\ =\ NewState(kRegexInvalidState,\ e.start,\ 0);}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Patch(e.out,\ s);}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(e.start,\ s,\ e.minIndex);}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00407\ }
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:\ }
\DoxyCodeLine{00409\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ syntax\ error\ (e.g.\ unclosed\ kLeftParenthesis)}}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \}}
\DoxyCodeLine{00413\ }
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keywordtype}{bool}\ EvalQuantifier(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ operandStack,\ \textcolor{keywordtype}{unsigned}\ n,\ \textcolor{keywordtype}{unsigned}\ m)\ \{}
\DoxyCodeLine{00415\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(n\ <=\ m);}
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(operandStack.GetSize()\ >=\ \textcolor{keyword}{sizeof}(Frag));}
\DoxyCodeLine{00417\ }
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ ==\ 0)\ \{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\ ==\ 0)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{0\}\ not\ support}}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\ ==\ kInfinityQuantifier)}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kZeroOrMore);\ \ \ \ \textcolor{comment}{//\ a\{0,\}\ -\/>\ a*}}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kZeroOrOne);\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{0,5\}\ -\/>\ a?}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ m\ -\/\ 1;\ i++)}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CloneTopOperand(operandStack);\ \ \ \ \ \ \textcolor{comment}{//\ a\{0,5\}\ -\/>\ a?\ a?\ a?\ a?\ a?}}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ m\ -\/\ 1;\ i++)}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kConcatenation);\ \textcolor{comment}{//\ a\{0,5\}\ -\/>\ a?a?a?a?a?}}
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00431\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00432\ }
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ n\ -\/\ 1;\ i++)\ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{3\}\ -\/>\ a\ a\ a}}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ CloneTopOperand(operandStack);}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\ ==\ kInfinityQuantifier)}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kOneOrMore);\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{3,\}\ -\/>\ a\ a\ a+}}
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (m\ >\ n)\ \{}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \ \ \ \ CloneTopOperand(operandStack);\ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{3,5\}\ -\/>\ a\ a\ a\ a}}
\DoxyCodeLine{00440\ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kZeroOrOne);\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\{3,5\}\ -\/>\ a\ a\ a\ a?}}
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ n;\ i\ <\ m\ -\/\ 1;\ i++)}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ CloneTopOperand(operandStack);\ \ \ \ \ \ \textcolor{comment}{//\ a\{3,5\}\ -\/>\ a\ a\ a\ a?\ a?}}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ n;\ i\ <\ m;\ i++)}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kConcatenation);\ \textcolor{comment}{//\ a\{3,5\}\ -\/>\ a\ a\ aa?a?}}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{unsigned}\ i\ =\ 0;\ i\ <\ n\ -\/\ 1;\ i++)}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \ \ \ \ Eval(operandStack,\ kConcatenation);\ \ \ \ \ \textcolor{comment}{//\ a\{3\}\ -\/>\ aaa,\ a\{3,\}\ -\/>\ aaa+,\ a\{3.5\}\ -\/>\ aaaa?a?}}
\DoxyCodeLine{00449\ }
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00451\ \ \ \ \ \}}
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keyword}{static}\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ Min(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ a,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ b)\ \{\ \textcolor{keywordflow}{return}\ a\ <\ b\ ?\ a\ :\ b;\ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \textcolor{keywordtype}{void}\ CloneTopOperand(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ operandStack)\ \{}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Frag\ src\ =\ *operandStack.template\ Top<Frag>();\ \textcolor{comment}{//\ Copy\ constructor\ to\ prevent\ invalidation}}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ count\ =\ stateCount\_\ -\/\ src.minIndex;\ \textcolor{comment}{//\ Assumes\ top\ operand\ contains\ states\ in\ [src-\/>minIndex,\ stateCount\_)}}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \ \ State*\ s\ =\ states\_.template\ Push<State>(count);}
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ memcpy(s,\ \&GetState(src.minIndex),\ count\ *\ \textcolor{keyword}{sizeof}(State));}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ j\ =\ 0;\ j\ <\ count;\ j++)\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s[j].out\ !=\ kRegexInvalidState)}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s[j].out\ +=\ count;}
\DoxyCodeLine{00463\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s[j].out1\ !=\ kRegexInvalidState)}
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ s[j].out1\ +=\ count;}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00466\ \ \ \ \ \ \ \ \ *operandStack.template\ Push<Frag>()\ =\ Frag(src.start\ +\ count,\ src.out\ +\ count,\ src.minIndex\ +\ count);}
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ stateCount\_\ +=\ count;}
\DoxyCodeLine{00468\ \ \ \ \ \}}
\DoxyCodeLine{00469\ }
\DoxyCodeLine{00470\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{keywordtype}{bool}\ ParseUnsigned(\mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream,\ Encoding>}}\&\ ds,\ \textcolor{keywordtype}{unsigned}*\ u)\ \{}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ r\ =\ 0;}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ds.Peek()\ <\ \textcolor{charliteral}{'0'}\ ||\ ds.Peek()\ >\ \textcolor{charliteral}{'9'})}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (ds.Peek()\ >=\ \textcolor{charliteral}{'0'}\ \&\&\ ds.Peek()\ <=\ \textcolor{charliteral}{'9'})\ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (r\ >=\ 429496729\ \&\&\ ds.Peek()\ >\ \textcolor{charliteral}{'5'})\ \textcolor{comment}{//\ 2\string^32\ -\/\ 1\ =\ 4294967295}}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ overflow}}
\DoxyCodeLine{00478\ \ \ \ \ \ \ \ \ \ \ \ \ r\ =\ r\ *\ 10\ +\ (ds.Take()\ -\/\ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ *u\ =\ r;}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00482\ \ \ \ \ \}}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00485\ \ \ \ \ \textcolor{keywordtype}{bool}\ ParseRange(\mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream,\ Encoding>}}\&\ ds,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}*\ range)\ \{}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isBegin\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ negate\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ step\ =\ 0;}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ start\ =\ kRegexInvalidRange;}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ current\ =\ kRegexInvalidRange;}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint;}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ ((codepoint\ =\ ds.Take())\ !=\ 0)\ \{}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (isBegin)\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ isBegin\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (codepoint\ ==\ \textcolor{charliteral}{'\string^'})\ \{}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ negate\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00499\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00500\ }
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (codepoint)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{']'}:}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (start\ ==\ kRegexInvalidRange)}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \ \ \textcolor{comment}{//\ Error:\ nothing\ inside\ []}}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (step\ ==\ 2)\ \{\ \textcolor{comment}{//\ Add\ trailing\ '-\/'}}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ r\ =\ NewRange(\textcolor{charliteral}{'-\/'});}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(current\ !=\ kRegexInvalidRange);}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetRange(current).next\ =\ r;}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (negate)}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetRange(start).start\ |=\ kRangeNegationFlag;}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *range\ =\ start;}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ds.Peek()\ ==\ \textcolor{charliteral}{'b'})\ \{}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ds.Take();}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ codepoint\ =\ 0x0008;\ \textcolor{comment}{//\ Escape\ backspace\ character}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!CharacterEscape(ds,\ \&codepoint))}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fall\ through\ to\ default}}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (step)\ \{}
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (codepoint\ ==\ \textcolor{charliteral}{'-\/'})\ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ step++;}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ fall\ through\ to\ step\ 0\ for\ other\ characters}}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 0:}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ r\ =\ NewRange(codepoint);}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (current\ !=\ kRegexInvalidRange)}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetRange(current).next\ =\ r;}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (start\ ==\ kRegexInvalidRange)}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ start\ =\ r;}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ current\ =\ r;}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ step\ =\ 1;}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00544\ }
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(step\ ==\ 2);}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ GetRange(current).end\ =\ codepoint;}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ step\ =\ 0;}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00553\ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \ \ }
\DoxyCodeLine{00555\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ NewRange(\textcolor{keywordtype}{unsigned}\ codepoint)\ \{}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ Range*\ r\ =\ ranges\_.template\ Push<Range>();}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ r-\/>start\ =\ r-\/>end\ =\ codepoint;}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ r-\/>next\ =\ kRegexInvalidRange;}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rangeCount\_++;}
\DoxyCodeLine{00560\ \ \ \ \ \}}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00563\ \ \ \ \ \textcolor{keywordtype}{bool}\ CharacterEscape(\mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream,\ Encoding>}}\&\ ds,\ \textcolor{keywordtype}{unsigned}*\ escapedCodepoint)\ \{}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint;}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (codepoint\ =\ ds.Take())\ \{}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\string^'}:}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'|'}:}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'('}:}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{')'}:}
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'['}:}
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{']'}:}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\{'}:}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\}'}:}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *escapedCodepoint\ =\ codepoint;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'f'}:\ *escapedCodepoint\ =\ 0x000C;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'n'}:\ *escapedCodepoint\ =\ 0x000A;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'r'}:\ *escapedCodepoint\ =\ 0x000D;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'t'}:\ *escapedCodepoint\ =\ 0x0009;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \textcolor{charliteral}{'v'}:\ *escapedCodepoint\ =\ 0x000B;\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ Unsupported\ escape\ character}}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ \ \ \ \ \}}
\DoxyCodeLine{00590\ }
\DoxyCodeLine{00591\ \ \ \ \ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ ownAllocator\_;}
\DoxyCodeLine{00592\ \ \ \ \ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ allocator\_;}
\DoxyCodeLine{00593\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ states\_;}
\DoxyCodeLine{00594\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ ranges\_;}
\DoxyCodeLine{00595\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ root\_;}
\DoxyCodeLine{00596\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ stateCount\_;}
\DoxyCodeLine{00597\ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ rangeCount\_;}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ kInfinityQuantifier\ =\ \string~0u;}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \ \ \textcolor{comment}{//\ For\ SearchWithAnchoring()}}
\DoxyCodeLine{00602\ \ \ \ \ \textcolor{keywordtype}{bool}\ anchorBegin\_;}
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keywordtype}{bool}\ anchorEnd\_;}
\DoxyCodeLine{00604\ \};}
\DoxyCodeLine{00605\ }
\DoxyCodeLine{00606\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ RegexType,\ \textcolor{keyword}{typename}\ Allocator\ =\ CrtAllocator>}
\DoxyCodeLine{00607\ \textcolor{keyword}{class\ }GenericRegexSearch\ \{}
\DoxyCodeLine{00608\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00609\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ RegexType::EncodingType\ Encoding;}
\DoxyCodeLine{00610\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ Encoding::Ch\ Ch;}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ GenericRegexSearch(\textcolor{keyword}{const}\ RegexType\&\ regex,\ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ allocator\ =\ 0)\ :\ }
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ regex\_(regex),\ allocator\_(allocator),\ ownAllocator\_(0),}
\DoxyCodeLine{00614\ \ \ \ \ \ \ \ \ state0\_(allocator,\ 0),\ state1\_(allocator,\ 0),\ stateSet\_()}
\DoxyCodeLine{00615\ \ \ \ \ \{}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(regex\_.IsValid());}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!allocator\_)}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \ \ \ \ ownAllocator\_\ =\ allocator\_\ =\ \mbox{\hyperlink{rapidjson_8h_a7534610ea72614148b80e56a1d030d4d}{CEREAL\_RAPIDJSON\_NEW}}(\mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}})();}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ stateSet\_\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}*\textcolor{keyword}{>}(allocator\_-\/>Malloc(GetStateSetSize()));}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ state0\_.template\ Reserve<SizeType>(regex\_.stateCount\_);}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ state1\_.template\ Reserve<SizeType>(regex\_.stateCount\_);}
\DoxyCodeLine{00622\ \ \ \ \ \}}
\DoxyCodeLine{00623\ }
\DoxyCodeLine{00624\ \ \ \ \ \string~GenericRegexSearch()\ \{}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ Allocator::Free(stateSet\_);}
\DoxyCodeLine{00626\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{rapidjson_8h_a423256b968105e87ee4cf34bee2dfed4}{CEREAL\_RAPIDJSON\_DELETE}}(ownAllocator\_);}
\DoxyCodeLine{00627\ \ \ \ \ \}}
\DoxyCodeLine{00628\ }
\DoxyCodeLine{00629\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00630\ \ \ \ \ \textcolor{keywordtype}{bool}\ Match(InputStream\&\ is)\ \{}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ SearchWithAnchoring(is,\ \textcolor{keyword}{true},\ \textcolor{keyword}{true});}
\DoxyCodeLine{00632\ \ \ \ \ \}}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \ \ \ \ \textcolor{keywordtype}{bool}\ Match(\textcolor{keyword}{const}\ Ch*\ s)\ \{}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}}\ is(s);}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Match(is);}
\DoxyCodeLine{00637\ \ \ \ \ \}}
\DoxyCodeLine{00638\ }
\DoxyCodeLine{00639\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00640\ \ \ \ \ \textcolor{keywordtype}{bool}\ Search(InputStream\&\ is)\ \{}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ SearchWithAnchoring(is,\ regex\_.anchorBegin\_,\ regex\_.anchorEnd\_);}
\DoxyCodeLine{00642\ \ \ \ \ \}}
\DoxyCodeLine{00643\ }
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keywordtype}{bool}\ Search(\textcolor{keyword}{const}\ Ch*\ s)\ \{}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_generic_string_stream}{GenericStringStream<Encoding>}}\ is(s);}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Search(is);}
\DoxyCodeLine{00647\ \ \ \ \ \}}
\DoxyCodeLine{00648\ }
\DoxyCodeLine{00649\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ RegexType::State\ State;}
\DoxyCodeLine{00651\ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ RegexType::Range\ Range;}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ InputStream>}
\DoxyCodeLine{00654\ \ \ \ \ \textcolor{keywordtype}{bool}\ SearchWithAnchoring(InputStream\&\ is,\ \textcolor{keywordtype}{bool}\ anchorBegin,\ \textcolor{keywordtype}{bool}\ anchorEnd)\ \{}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_decoded_stream}{DecodedStream<InputStream,\ Encoding>}}\ ds(is);}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ state0\_.Clear();}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ *current\ =\ \&state0\_,\ *next\ =\ \&state1\_;}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ stateSetSize\ =\ GetStateSetSize();}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ std::memset(stateSet\_,\ 0,\ stateSetSize);}
\DoxyCodeLine{00661\ }
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ matched\ =\ AddState(*current,\ regex\_.root\_);}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ codepoint;}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (!current-\/>Empty()\ \&\&\ (codepoint\ =\ ds.Take())\ !=\ 0)\ \{}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ std::memset(stateSet\_,\ 0,\ stateSetSize);}
\DoxyCodeLine{00666\ \ \ \ \ \ \ \ \ \ \ \ \ next-\/>Clear();}
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ matched\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}*\ s\ =\ current-\/>template\ Bottom<SizeType>();\ s\ !=\ current-\/>template\ End<SizeType>();\ ++s)\ \{}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ State\&\ sr\ =\ regex\_.GetState(*s);}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (sr.codepoint\ ==\ codepoint\ ||}
\DoxyCodeLine{00671\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sr.codepoint\ ==\ RegexType::kAnyCharacterClass\ ||\ }
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (sr.codepoint\ ==\ RegexType::kRangeCharacterClass\ \&\&\ MatchRange(sr.rangeStart,\ codepoint)))}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ matched\ =\ AddState(*next,\ sr.out)\ ||\ matched;}
\DoxyCodeLine{00675\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anchorEnd\ \&\&\ matched)}
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00678\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!anchorBegin)}
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ AddState(*next,\ regex\_.root\_);}
\DoxyCodeLine{00680\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ internal::Swap(current,\ next);}
\DoxyCodeLine{00682\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00683\ }
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ matched;}
\DoxyCodeLine{00685\ \ \ \ \ \}}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ GetStateSetSize()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (regex\_.stateCount\_\ +\ 31)\ /\ 32\ *\ 4;}
\DoxyCodeLine{00689\ \ \ \ \ \}}
\DoxyCodeLine{00690\ }
\DoxyCodeLine{00691\ \ \ \ \ \textcolor{comment}{//\ Return\ whether\ the\ added\ states\ is\ a\ match\ state}}
\DoxyCodeLine{00692\ \ \ \ \ \textcolor{keywordtype}{bool}\ AddState(\mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\&\ l,\ \mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ index)\ \{}
\DoxyCodeLine{00693\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_ga06f04b87f6adff794a5a4bbe254dc15c}{CEREAL\_RAPIDJSON\_ASSERT}}(index\ !=\ kRegexInvalidState);}
\DoxyCodeLine{00694\ }
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ State\&\ s\ =\ regex\_.GetState(index);}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (s.out1\ !=\ kRegexInvalidState)\ \{\ \textcolor{comment}{//\ Split}}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ matched\ =\ AddState(l,\ s.out);}
\DoxyCodeLine{00698\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ AddState(l,\ s.out1)\ ||\ matched;}
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (!(stateSet\_[index\ >>\ 5]\ \&\ (1u\ <<\ (index\ \&\ 31))))\ \{}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ stateSet\_[index\ >>\ 5]\ |=\ (1u\ <<\ (index\ \&\ 31));}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ *l.template\ PushUnsafe<SizeType>()\ =\ index;}
\DoxyCodeLine{00703\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ s.out\ ==\ kRegexInvalidState;\ \textcolor{comment}{//\ by\ using\ PushUnsafe()\ above,\ we\ can\ ensure\ s\ is\ not\ validated\ due\ to\ reallocation.}}
\DoxyCodeLine{00705\ \ \ \ \ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \textcolor{keywordtype}{bool}\ MatchRange(\mbox{\hyperlink{rapidjson_8h_a8f194bfff5bcc5b4b0d483ff0504a336}{SizeType}}\ rangeIndex,\ \textcolor{keywordtype}{unsigned}\ codepoint)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ yes\ =\ (regex\_.GetRange(rangeIndex).start\ \&\ RegexType::kRangeNegationFlag)\ ==\ 0;}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (rangeIndex\ !=\ kRegexInvalidRange)\ \{}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Range\&\ r\ =\ regex\_.GetRange(rangeIndex);}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (codepoint\ >=\ (r.start\ \&\ \string~RegexType::kRangeNegationFlag)\ \&\&\ codepoint\ <=\ r.end)}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ yes;}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ rangeIndex\ =\ r.next;}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ !yes;}
\DoxyCodeLine{00716\ \ \ \ \ \}}
\DoxyCodeLine{00717\ }
\DoxyCodeLine{00718\ \ \ \ \ \textcolor{keyword}{const}\ RegexType\&\ regex\_;}
\DoxyCodeLine{00719\ \ \ \ \ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ allocator\_;}
\DoxyCodeLine{00720\ \ \ \ \ \mbox{\hyperlink{classrapidjson_1_1_allocator}{Allocator}}*\ ownAllocator\_;}
\DoxyCodeLine{00721\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ state0\_;}
\DoxyCodeLine{00722\ \ \ \ \ \mbox{\hyperlink{classinternal_1_1_stack}{Stack<Allocator>}}\ state1\_;}
\DoxyCodeLine{00723\ \ \ \ \ uint32\_t*\ stateSet\_;}
\DoxyCodeLine{00724\ \};}
\DoxyCodeLine{00725\ }
\DoxyCodeLine{00726\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classinternal_1_1_generic_regex}{GenericRegex<UTF8<>}}\ >\ Regex;}
\DoxyCodeLine{00727\ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{classinternal_1_1_generic_regex_search}{GenericRegexSearch<Regex>}}\ RegexSearch;}
\DoxyCodeLine{00728\ }
\DoxyCodeLine{00729\ \}\ \textcolor{comment}{//\ namespace\ internal}}
\DoxyCodeLine{00730\ \mbox{\hyperlink{group___c_e_r_e_a_l___r_a_p_i_d_j_s_o_n___c_o_n_f_i_g_gaddb083c1a6a5beaafbecc3f99973a3ff}{CEREAL\_RAPIDJSON\_NAMESPACE\_END}}}
\DoxyCodeLine{00731\ }
\DoxyCodeLine{00732\ \textcolor{preprocessor}{\#ifdef\ \_\_GNUC\_\_}}
\DoxyCodeLine{00733\ CEREAL\_RAPIDJSON\_DIAG\_POP}
\DoxyCodeLine{00734\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00735\ }
\DoxyCodeLine{00736\ \textcolor{preprocessor}{\#if\ defined(\_\_clang\_\_)\ ||\ defined(\_MSC\_VER)}}
\DoxyCodeLine{00737\ CEREAL\_RAPIDJSON\_DIAG\_POP}
\DoxyCodeLine{00738\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00739\ }
\DoxyCodeLine{00740\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CEREAL\_RAPIDJSON\_INTERNAL\_REGEX\_H\_}}

\end{DoxyCode}
