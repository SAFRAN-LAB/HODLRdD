\doxysection{polymorphic.\+hpp}
\hypertarget{polymorphic_8hpp_source}{}\label{polymorphic_8hpp_source}\index{lib/cereal/types/polymorphic.hpp@{lib/cereal/types/polymorphic.hpp}}
\mbox{\hyperlink{polymorphic_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00004\ \textcolor{comment}{/*}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ Copyright\ (c)\ 2014,\ Randolph\ Voorhies,\ Shane\ Grant}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ All\ rights\ reserved.}}
\DoxyCodeLine{00007\ \textcolor{comment}{}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ Redistribution\ and\ use\ in\ source\ and\ binary\ forms,\ with\ or\ without}}
\DoxyCodeLine{00009\ \textcolor{comment}{\ \ modification,\ are\ permitted\ provided\ that\ the\ following\ conditions\ are\ met:}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ \ \ \ *\ Redistributions\ of\ source\ code\ must\ retain\ the\ above\ copyright}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ \ \ \ \ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer.}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ \ \ *\ Redistributions\ in\ binary\ form\ must\ reproduce\ the\ above\ copyright}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ \ \ \ \ notice,\ this\ list\ of\ conditions\ and\ the\ following\ disclaimer\ in\ the}}
\DoxyCodeLine{00014\ \textcolor{comment}{\ \ \ \ \ \ \ \ documentation\ and/or\ other\ materials\ provided\ with\ the\ distribution.}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ \ \ \ \ \ *\ Neither\ the\ name\ of\ cereal\ nor\ the}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ \ \ \ \ \ \ \ names\ of\ its\ contributors\ may\ be\ used\ to\ endorse\ or\ promote\ products}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ \ \ \ \ derived\ from\ this\ software\ without\ specific\ prior\ written\ permission.}}
\DoxyCodeLine{00018\ \textcolor{comment}{}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ THIS\ SOFTWARE\ IS\ PROVIDED\ BY\ THE\ COPYRIGHT\ HOLDERS\ AND\ CONTRIBUTORS\ "{}AS\ IS"{}\ AND}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ \ ANY\ EXPRESS\ OR\ IMPLIED\ WARRANTIES,\ INCLUDING,\ BUT\ NOT\ LIMITED\ TO,\ THE\ IMPLIED}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ WARRANTIES\ OF\ MERCHANTABILITY\ AND\ FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ ARE}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ DISCLAIMED.\ IN\ NO\ EVENT\ SHALL\ RANDOLPH\ VOORHIES\ OR\ SHANE\ GRANT\ BE\ LIABLE\ FOR\ ANY}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ DIRECT,\ INDIRECT,\ INCIDENTAL,\ SPECIAL,\ EXEMPLARY,\ OR\ CONSEQUENTIAL\ DAMAGES}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ \ (INCLUDING,\ BUT\ NOT\ LIMITED\ TO,\ PROCUREMENT\ OF\ SUBSTITUTE\ GOODS\ OR\ SERVICES;}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ LOSS\ OF\ USE,\ DATA,\ OR\ PROFITS;\ OR\ BUSINESS\ INTERRUPTION)\ HOWEVER\ CAUSED\ AND}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ ON\ ANY\ THEORY\ OF\ LIABILITY,\ WHETHER\ IN\ CONTRACT,\ STRICT\ LIABILITY,\ OR\ TORT}}
\DoxyCodeLine{00027\ \textcolor{comment}{\ \ (INCLUDING\ NEGLIGENCE\ OR\ OTHERWISE)\ ARISING\ IN\ ANY\ WAY\ OUT\ OF\ THE\ USE\ OF\ THIS}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ \ SOFTWARE,\ EVEN\ IF\ ADVISED\ OF\ THE\ POSSIBILITY\ OF\ SUCH\ DAMAGE.}}
\DoxyCodeLine{00029\ \textcolor{comment}{*/}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#ifndef\ CEREAL\_TYPES\_POLYMORPHIC\_HPP\_}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#define\ CEREAL\_TYPES\_POLYMORPHIC\_HPP\_}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{cereal_8hpp}{cereal/cereal.hpp}}"{}}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{memory_8hpp}{cereal/types/memory.hpp}}"{}}}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{util_8hpp}{cereal/details/util.hpp}}"{}}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{helpers_8hpp}{cereal/details/helpers.hpp}}"{}}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{traits_8hpp}{cereal/details/traits.hpp}}"{}}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{polymorphic__impl_8hpp}{cereal/details/polymorphic\_impl.hpp}}"{}}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#if\ defined(\_MSC\_VER)\ \&\&\ \_MSC\_VER\ <\ 1916}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ CEREAL\_STATIC\_CONSTEXPR\ static}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ CEREAL\_STATIC\_CONSTEXPR\ static\ constexpr}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#define\ CEREAL\_REGISTER\_TYPE(...)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ namespace\ cereal\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00084\ \textcolor{preprocessor}{\ \ namespace\ detail\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00085\ \textcolor{preprocessor}{\ \ template\ <>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00086\ \textcolor{preprocessor}{\ \ struct\ binding\_name<\_\_VA\_ARGS\_\_>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00087\ \textcolor{preprocessor}{\ \ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00088\ \textcolor{preprocessor}{\ \ \ \ CEREAL\_STATIC\_CONSTEXPR\ char\ const\ *\ name()\ \{\ return\ \#\_\_VA\_ARGS\_\_;\ \}\ \(\backslash\)}}
\DoxyCodeLine{00089\ \textcolor{preprocessor}{\ \ \};\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00090\ \textcolor{preprocessor}{\ \ \}\ \}\ }\textcolor{comment}{/*\ end\ namespaces\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00091\ \textcolor{preprocessor}{\ \ CEREAL\_BIND\_TO\_ARCHIVES(\_\_VA\_ARGS\_\_)}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00095\ }
\DoxyCodeLine{00099\ \textcolor{preprocessor}{\#define\ CEREAL\_REGISTER\_TYPE\_WITH\_NAME(T,\ Name)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00100\ \textcolor{preprocessor}{\ \ namespace\ cereal\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00101\ \textcolor{preprocessor}{\ \ namespace\ detail\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00102\ \textcolor{preprocessor}{\ \ template\ <>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00103\ \textcolor{preprocessor}{\ \ struct\ binding\_name<T>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00104\ \textcolor{preprocessor}{\ \ \{\ CEREAL\_STATIC\_CONSTEXPR\ char\ const\ *\ name()\ \{\ return\ Name;\ \}\ \};\ \(\backslash\)}}
\DoxyCodeLine{00105\ \textcolor{preprocessor}{\ \ \}\ \}\ }\textcolor{comment}{/*\ end\ namespaces\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00106\ \textcolor{preprocessor}{\ \ CEREAL\_BIND\_TO\_ARCHIVES(T)}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00121\ \textcolor{preprocessor}{\#define\ CEREAL\_REGISTER\_POLYMORPHIC\_RELATION(Base,\ Derived)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00122\ \textcolor{preprocessor}{\ \ namespace\ cereal\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00123\ \textcolor{preprocessor}{\ \ namespace\ detail\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00124\ \textcolor{preprocessor}{\ \ template\ <>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00125\ \textcolor{preprocessor}{\ \ struct\ PolymorphicRelation<Base,\ Derived>\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00126\ \textcolor{preprocessor}{\ \ \{\ static\ void\ bind()\ \{\ RegisterPolymorphicCaster<Base,\ Derived>::bind();\ \}\ \};\ \(\backslash\)}}
\DoxyCodeLine{00127\ \textcolor{preprocessor}{\ \ \}\ \}\ }\textcolor{comment}{/*\ end\ namespaces\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00131\ }
\DoxyCodeLine{00155\ \textcolor{preprocessor}{\#define\ CEREAL\_REGISTER\_DYNAMIC\_INIT(LibName)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00156\ \textcolor{preprocessor}{\ \ namespace\ cereal\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00157\ \textcolor{preprocessor}{\ \ namespace\ detail\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00158\ \textcolor{preprocessor}{\ \ \ \ void\ CEREAL\_DLL\_EXPORT\ dynamic\_init\_dummy\_\#\#LibName()\ \{\}\ \(\backslash\)}}
\DoxyCodeLine{00159\ \textcolor{preprocessor}{\ \ \}\ \}\ }\textcolor{comment}{/*\ end\ namespaces\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00168\ \textcolor{preprocessor}{\#define\ CEREAL\_FORCE\_DYNAMIC\_INIT(LibName)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\ \ namespace\ cereal\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00170\ \textcolor{preprocessor}{\ \ namespace\ detail\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00171\ \textcolor{preprocessor}{\ \ \ \ void\ CEREAL\_DLL\_EXPORT\ dynamic\_init\_dummy\_\#\#LibName();\ \(\backslash\)}}
\DoxyCodeLine{00172\ \textcolor{preprocessor}{\ \ \}\ }\textcolor{comment}{/*\ end\ detail\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00173\ \textcolor{preprocessor}{\ \ \}\ }\textcolor{comment}{/*\ end\ cereal\ */}\textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00174\ \textcolor{preprocessor}{\ \ namespace\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00175\ \textcolor{preprocessor}{\ \ \ \ struct\ dynamic\_init\_\#\#LibName\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00176\ \textcolor{preprocessor}{\ \ \ \ \ \ dynamic\_init\_\#\#LibName()\ \{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00177\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ ::cereal::detail::dynamic\_init\_dummy\_\#\#LibName();\ \ \(\backslash\)}}
\DoxyCodeLine{00178\ \textcolor{preprocessor}{\ \ \ \ \ \ \}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00179\ \textcolor{preprocessor}{\ \ \ \ \}\ dynamic\_init\_instance\_\#\#LibName;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00180\ \textcolor{preprocessor}{\ \ \}\ }\textcolor{comment}{/*\ end\ anonymous\ namespace\ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecereal}{cereal}}}
\DoxyCodeLine{00183\ \{}
\DoxyCodeLine{00184\ \ \ \textcolor{keyword}{namespace\ }polymorphic\_detail}
\DoxyCodeLine{00185\ \ \ \{}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \textcolor{preprocessor}{\ \ \ \ \#define\ UNREGISTERED\_POLYMORPHIC\_EXCEPTION(LoadSave,\ Name)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00189\ \textcolor{preprocessor}{\ \ \ \ \ \ throw\ cereal::Exception("{}Trying\ to\ "{}\ \#LoadSave\ "{}\ an\ unregistered\ polymorphic\ type\ ("{}\ +\ Name\ +\ "{}).\(\backslash\)n"{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00190\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}Make\ sure\ your\ type\ is\ registered\ with\ CEREAL\_REGISTER\_TYPE\ and\ that\ the\ archive\ "{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}you\ are\ using\ was\ included\ (and\ registered\ with\ CEREAL\_REGISTER\_ARCHIVE)\ prior\ to\ calling\ CEREAL\_REGISTER\_TYPE.\(\backslash\)n"{}\ \ \ \(\backslash\)}}
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ "{}If\ your\ type\ is\ already\ registered\ and\ you\ still\ see\ this\ error,\ you\ may\ need\ to\ use\ CEREAL\_REGISTER\_DYNAMIC\_INIT."{});}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Archive>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00197\ \ \ \ \ typename\ ::cereal::detail::InputBindingMap<Archive>::Serializers\ \mbox{\hyperlink{polymorphic_8hpp_a78e7f83c5bd8746da7563d1bdb145cdf}{getInputBinding}}(Archive\ \&\ ar,\ std::uint32\_t\ \textcolor{keyword}{const}\ nameid)}
\DoxyCodeLine{00198\ \ \ \ \ \{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ nameid\ is\ zero,\ we\ serialized\ a\ null\ pointer}}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ ==\ 0)}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ typename\ ::cereal::detail::InputBindingMap<Archive>::Serializers\ emptySerializers;}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ emptySerializers.shared\_ptr\ =\ [](\textcolor{keywordtype}{void}*,\ std::shared\_ptr<void>\ \&\ ptr,\ std::type\_info\ \textcolor{keyword}{const}\ \&)\ \{\ ptr.reset();\ \};}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ emptySerializers.unique\_ptr\ =\ [](\textcolor{keywordtype}{void}*,\ std::unique\_ptr<void,\ ::cereal::detail::EmptyDeleter<void>>\ \&\ ptr,\ std::type\_info\ \textcolor{keyword}{const}\ \&)\ \{\ ptr.reset(\ \textcolor{keyword}{nullptr}\ );\ \};}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ emptySerializers;}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ std::string\ name;}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ \&\ detail::msb\_32bit)}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_name"{}},\ name)\ );}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ ar.registerPolymorphicName(nameid,\ name);}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ name\ =\ ar.getPolymorphicName(nameid);}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\ bindingMap\ =\ \mbox{\hyperlink{classcereal_1_1detail_1_1_static_object}{detail::StaticObject<detail::InputBindingMap<Archive>}}>::getInstance().map;}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00219\ \ \ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ bindingMap.find(name);}
\DoxyCodeLine{00220\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(binding\ ==\ bindingMap.end())}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6a90af3fca239017978477a753225101}{UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}(load,\ name)}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ binding-\/>second;}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<(traits::is\_default\_constructible<T>::value}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{structcereal_1_1traits_1_1has__load__and__construct}{traits::has\_load\_and\_construct<T,\ Archive>::value}})}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !std::is\_abstract<T>::value,\ \textcolor{keywordtype}{bool}>::type}
\DoxyCodeLine{00236\ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{serialize\_wrapper}}(Archive\ \&\ ar,\ std::shared\_ptr<T>\ \&\ ptr,\ std::uint32\_t\ \textcolor{keyword}{const}\ nameid)}
\DoxyCodeLine{00237\ \ \ \ \ \{}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ \&\ detail::msb2\_32bit)}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}ptr\_wrapper"{}},\ \mbox{\hyperlink{memory_8hpp_a89420022991908207a506e30a8f44b6f}{memory\_detail::make\_ptr\_wrapper}}(ptr))\ );}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T,\ \textcolor{keyword}{class}\ D>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<(traits::is\_default\_constructible<T>::value}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ \mbox{\hyperlink{structcereal_1_1traits_1_1has__load__and__construct}{traits::has\_load\_and\_construct<T,\ Archive>::value}})}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !std::is\_abstract<T>::value,\ \textcolor{keywordtype}{bool}>::type}
\DoxyCodeLine{00254\ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{serialize\_wrapper}}(Archive\ \&\ ar,\ std::unique\_ptr<T,\ D>\ \&\ ptr,\ std::uint32\_t\ \textcolor{keyword}{const}\ nameid)}
\DoxyCodeLine{00255\ \ \ \ \ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ \&\ detail::msb2\_32bit)}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \{}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}ptr\_wrapper"{}},\ \mbox{\hyperlink{memory_8hpp_a89420022991908207a506e30a8f44b6f}{memory\_detail::make\_ptr\_wrapper}}(ptr))\ );}
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00262\ \ \ \ \ \}}
\DoxyCodeLine{00263\ }
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00271\ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<(!traits::is\_default\_constructible<T>::value}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !\mbox{\hyperlink{structcereal_1_1traits_1_1has__load__and__construct}{traits::has\_load\_and\_construct<T,\ Archive>::value}})}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ std::is\_abstract<T>::value,\ \textcolor{keywordtype}{bool}>::type}
\DoxyCodeLine{00274\ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{serialize\_wrapper}}(Archive\ \&,\ std::shared\_ptr<T>\ \&,\ std::uint32\_t\ \textcolor{keyword}{const}\ nameid)}
\DoxyCodeLine{00275\ \ \ \ \ \{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ \&\ detail::msb2\_32bit)}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{structcereal_1_1_exception}{cereal::Exception}}(\textcolor{stringliteral}{"{}Cannot\ load\ a\ polymorphic\ type\ that\ is\ not\ default\ constructable\ and\ does\ not\ have\ a\ load\_and\_construct\ function"{}});}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00279\ \ \ \ \ \}}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T,\ \textcolor{keyword}{class}\ D>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00288\ \ \ \ \ \ \textcolor{keyword}{typename}\ std::enable\_if<(!traits::is\_default\_constructible<T>::value}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\&\ !\mbox{\hyperlink{structcereal_1_1traits_1_1has__load__and__construct}{traits::has\_load\_and\_construct<T,\ Archive>::value}})}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ||\ std::is\_abstract<T>::value,\ \textcolor{keywordtype}{bool}>::type}
\DoxyCodeLine{00291\ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{serialize\_wrapper}}(Archive\ \&,\ std::unique\_ptr<T,\ D>\ \&,\ std::uint32\_t\ \textcolor{keyword}{const}\ nameid)}
\DoxyCodeLine{00292\ \ \ \ \ \{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nameid\ \&\ detail::msb2\_32bit)}
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{structcereal_1_1_exception}{cereal::Exception}}(\textcolor{stringliteral}{"{}Cannot\ load\ a\ polymorphic\ type\ that\ is\ not\ default\ constructable\ and\ does\ not\ have\ a\ load\_and\_construct\ function"{}});}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00296\ \ \ \ \ \}}
\DoxyCodeLine{00297\ \ \ \}\ \textcolor{comment}{//\ polymorphic\_detail}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00299\ \ \ \textcolor{comment}{//\ \#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#\#}}
\DoxyCodeLine{00300\ \ \ \textcolor{comment}{//\ Pointer\ serialization\ for\ polymorphic\ types}}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00303\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00304\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value\ \&\&\ std::is\_abstract<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00305\ \ \ \mbox{\hyperlink{macros_8hpp_a85b7884671ac5a804b66ec7c34d0ca71}{CEREAL\_SAVE\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::shared\_ptr<T>\ \textcolor{keyword}{const}\ \&\ ptr\ )}
\DoxyCodeLine{00306\ \ \ \{}
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keywordflow}{if}(!ptr)}
\DoxyCodeLine{00308\ \ \ \ \ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \textcolor{comment}{//\ same\ behavior\ as\ nullptr\ in\ memory\ implementation}}
\DoxyCodeLine{00310\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ std::uint32\_t(0))\ );}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00312\ \ \ \ \ \}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00314\ \ \ \ \ std::type\_info\ \textcolor{keyword}{const}\ \&\ ptrinfo\ =\ \textcolor{keyword}{typeid}(*ptr.get());}
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keyword}{static}\ std::type\_info\ \textcolor{keyword}{const}\ \&\ tinfo\ =\ \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{00316\ \ \ \ \ \textcolor{comment}{//\ ptrinfo\ can\ never\ be\ equal\ to\ T\ info\ since\ we\ can't\ have\ an\ instance}}
\DoxyCodeLine{00317\ \ \ \ \ \textcolor{comment}{//\ of\ an\ abstract\ object}}
\DoxyCodeLine{00318\ \ \ \ \ \textcolor{comment}{//\ \ this\ implies\ we\ need\ to\ do\ the\ lookup}}
\DoxyCodeLine{00319\ }
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\ bindingMap\ =\ \mbox{\hyperlink{classcereal_1_1detail_1_1_static_object}{detail::StaticObject<detail::OutputBindingMap<Archive>}}>::getInstance().map;}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ bindingMap.find(std::type\_index(ptrinfo));}
\DoxyCodeLine{00323\ \ \ \ \ \textcolor{keywordflow}{if}(binding\ ==\ bindingMap.end())}
\DoxyCodeLine{00324\ \ \ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6a90af3fca239017978477a753225101}{UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}(save,\ \mbox{\hyperlink{util_8hpp_a3378464965f0d222673a51822c02f95e}{cereal::util::demangle}}(ptrinfo.name()))}
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ \ \ \ \ binding-\/>second.shared\_ptr(\&ar,\ ptr.get(),\ tinfo);}
\DoxyCodeLine{00327\ \ \ \}}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00330\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00331\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value\ \&\&\ !std::is\_abstract<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00332\ \ \ \mbox{\hyperlink{macros_8hpp_a85b7884671ac5a804b66ec7c34d0ca71}{CEREAL\_SAVE\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::shared\_ptr<T>\ \textcolor{keyword}{const}\ \&\ ptr\ )}
\DoxyCodeLine{00333\ \ \ \{}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{if}(!ptr)}
\DoxyCodeLine{00335\ \ \ \ \ \{}
\DoxyCodeLine{00336\ \ \ \ \ \ \ \textcolor{comment}{//\ same\ behavior\ as\ nullptr\ in\ memory\ implementation}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ std::uint32\_t(0))\ );}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00339\ \ \ \ \ \}}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ std::type\_info\ \textcolor{keyword}{const}\ \&\ ptrinfo\ =\ \textcolor{keyword}{typeid}(*ptr.get());}
\DoxyCodeLine{00342\ \ \ \ \ \textcolor{keyword}{static}\ std::type\_info\ \textcolor{keyword}{const}\ \&\ tinfo\ =\ \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00344\ \ \ \ \ \textcolor{keywordflow}{if}(ptrinfo\ ==\ tinfo)}
\DoxyCodeLine{00345\ \ \ \ \ \{}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ 2nd\ msb\ signals\ that\ the\ following\ pointer\ does\ not\ need\ to\ be}}
\DoxyCodeLine{00347\ \ \ \ \ \ \ \textcolor{comment}{//\ cast\ with\ our\ polymorphic\ machinery}}
\DoxyCodeLine{00348\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ detail::msb2\_32bit)\ );}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}ptr\_wrapper"{}},\ \mbox{\hyperlink{memory_8hpp_a89420022991908207a506e30a8f44b6f}{memory\_detail::make\_ptr\_wrapper}}(ptr))\ );}
\DoxyCodeLine{00351\ }
\DoxyCodeLine{00352\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00353\ \ \ \ \ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\ bindingMap\ =\ \mbox{\hyperlink{classcereal_1_1detail_1_1_static_object}{detail::StaticObject<detail::OutputBindingMap<Archive>}}>::getInstance().map;}
\DoxyCodeLine{00356\ }
\DoxyCodeLine{00357\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ bindingMap.find(std::type\_index(ptrinfo));}
\DoxyCodeLine{00358\ \ \ \ \ \textcolor{keywordflow}{if}(binding\ ==\ bindingMap.end())}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6a90af3fca239017978477a753225101}{UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}(save,\ \mbox{\hyperlink{util_8hpp_a3378464965f0d222673a51822c02f95e}{cereal::util::demangle}}(ptrinfo.name()))}
\DoxyCodeLine{00360\ }
\DoxyCodeLine{00361\ \ \ \ \ binding-\/>second.shared\_ptr(\&ar,\ ptr.get(),\ tinfo);}
\DoxyCodeLine{00362\ \ \ \}}
\DoxyCodeLine{00363\ }
\DoxyCodeLine{00365\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00366\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00367\ \ \ \mbox{\hyperlink{macros_8hpp_a854de4fbe2b80753b27264b7dda740e8}{CEREAL\_LOAD\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::shared\_ptr<T>\ \&\ ptr\ )}
\DoxyCodeLine{00368\ \ \ \{}
\DoxyCodeLine{00369\ \ \ \ \ std::uint32\_t\ nameid;}
\DoxyCodeLine{00370\ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ nameid)\ );}
\DoxyCodeLine{00371\ }
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{comment}{//\ Check\ to\ see\ if\ we\ can\ skip\ all\ of\ this\ polymorphism\ business}}
\DoxyCodeLine{00373\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{polymorphic\_detail::serialize\_wrapper}}(ar,\ ptr,\ nameid))}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00375\ }
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ \mbox{\hyperlink{polymorphic_8hpp_a78e7f83c5bd8746da7563d1bdb145cdf}{polymorphic\_detail::getInputBinding}}(ar,\ nameid);}
\DoxyCodeLine{00377\ \ \ \ \ std::shared\_ptr<void>\ result;}
\DoxyCodeLine{00378\ \ \ \ \ binding.shared\_ptr(\&ar,\ result,\ \textcolor{keyword}{typeid}(T));}
\DoxyCodeLine{00379\ \ \ \ \ ptr\ =\ std::static\_pointer\_cast<T>(result);}
\DoxyCodeLine{00380\ \ \ \}}
\DoxyCodeLine{00381\ }
\DoxyCodeLine{00383\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00384\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00385\ \ \ \mbox{\hyperlink{macros_8hpp_a85b7884671ac5a804b66ec7c34d0ca71}{CEREAL\_SAVE\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::weak\_ptr<T>\ \textcolor{keyword}{const}\ \&\ ptr\ )}
\DoxyCodeLine{00386\ \ \ \{}
\DoxyCodeLine{00387\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ sptr\ =\ ptr.lock();}
\DoxyCodeLine{00388\ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}locked\_ptr"{}},\ sptr)\ );}
\DoxyCodeLine{00389\ \ \ \}}
\DoxyCodeLine{00390\ }
\DoxyCodeLine{00392\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00393\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00394\ \ \ \mbox{\hyperlink{macros_8hpp_a854de4fbe2b80753b27264b7dda740e8}{CEREAL\_LOAD\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::weak\_ptr<T>\ \&\ ptr\ )}
\DoxyCodeLine{00395\ \ \ \{}
\DoxyCodeLine{00396\ \ \ \ \ std::shared\_ptr<T>\ sptr;}
\DoxyCodeLine{00397\ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}locked\_ptr"{}},\ sptr)\ );}
\DoxyCodeLine{00398\ \ \ \ \ ptr\ =\ sptr;}
\DoxyCodeLine{00399\ \ \ \}}
\DoxyCodeLine{00400\ }
\DoxyCodeLine{00402\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T,\ \textcolor{keyword}{class}\ D>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00403\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value\ \&\&\ std::is\_abstract<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00404\ \ \ \mbox{\hyperlink{macros_8hpp_a85b7884671ac5a804b66ec7c34d0ca71}{CEREAL\_SAVE\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::unique\_ptr<T,\ D>\ \textcolor{keyword}{const}\ \&\ ptr\ )}
\DoxyCodeLine{00405\ \ \ \{}
\DoxyCodeLine{00406\ \ \ \ \ \textcolor{keywordflow}{if}(!ptr)}
\DoxyCodeLine{00407\ \ \ \ \ \{}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \textcolor{comment}{//\ same\ behavior\ as\ nullptr\ in\ memory\ implementation}}
\DoxyCodeLine{00409\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ std::uint32\_t(0))\ );}
\DoxyCodeLine{00410\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00411\ \ \ \ \ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ std::type\_info\ \textcolor{keyword}{const}\ \&\ ptrinfo\ =\ \textcolor{keyword}{typeid}(*ptr.get());}
\DoxyCodeLine{00414\ \ \ \ \ \textcolor{keyword}{static}\ std::type\_info\ \textcolor{keyword}{const}\ \&\ tinfo\ =\ \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{00415\ \ \ \ \ \textcolor{comment}{//\ ptrinfo\ can\ never\ be\ equal\ to\ T\ info\ since\ we\ can't\ have\ an\ instance}}
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//\ of\ an\ abstract\ object}}
\DoxyCodeLine{00417\ \ \ \ \ \textcolor{comment}{//\ \ this\ implies\ we\ need\ to\ do\ the\ lookup}}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\ bindingMap\ =\ \mbox{\hyperlink{classcereal_1_1detail_1_1_static_object}{detail::StaticObject<detail::OutputBindingMap<Archive>}}>::getInstance().map;}
\DoxyCodeLine{00420\ }
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ bindingMap.find(std::type\_index(ptrinfo));}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keywordflow}{if}(binding\ ==\ bindingMap.end())}
\DoxyCodeLine{00423\ \ \ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6a90af3fca239017978477a753225101}{UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}(save,\ \mbox{\hyperlink{util_8hpp_a3378464965f0d222673a51822c02f95e}{cereal::util::demangle}}(ptrinfo.name()))}
\DoxyCodeLine{00424\ }
\DoxyCodeLine{00425\ \ \ \ \ binding-\/>second.unique\_ptr(\&ar,\ ptr.get(),\ tinfo);}
\DoxyCodeLine{00426\ \ \ \}}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00429\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T,\ \textcolor{keyword}{class}\ D>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00430\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value\ \&\&\ !std::is\_abstract<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00431\ \ \ \mbox{\hyperlink{macros_8hpp_a85b7884671ac5a804b66ec7c34d0ca71}{CEREAL\_SAVE\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::unique\_ptr<T,\ D>\ \textcolor{keyword}{const}\ \&\ ptr\ )}
\DoxyCodeLine{00432\ \ \ \{}
\DoxyCodeLine{00433\ \ \ \ \ \textcolor{keywordflow}{if}(!ptr)}
\DoxyCodeLine{00434\ \ \ \ \ \{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \textcolor{comment}{//\ same\ behavior\ as\ nullptr\ in\ memory\ implementation}}
\DoxyCodeLine{00436\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ std::uint32\_t(0))\ );}
\DoxyCodeLine{00437\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00438\ \ \ \ \ \}}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \ \ std::type\_info\ \textcolor{keyword}{const}\ \&\ ptrinfo\ =\ \textcolor{keyword}{typeid}(*ptr.get());}
\DoxyCodeLine{00441\ \ \ \ \ \textcolor{keyword}{static}\ std::type\_info\ \textcolor{keyword}{const}\ \&\ tinfo\ =\ \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00443\ \ \ \ \ \textcolor{keywordflow}{if}(ptrinfo\ ==\ tinfo)}
\DoxyCodeLine{00444\ \ \ \ \ \{}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \textcolor{comment}{//\ The\ 2nd\ msb\ signals\ that\ the\ following\ pointer\ does\ not\ need\ to\ be}}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \textcolor{comment}{//\ cast\ with\ our\ polymorphic\ machinery}}
\DoxyCodeLine{00447\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ detail::msb2\_32bit)\ );}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}ptr\_wrapper"{}},\ \mbox{\hyperlink{memory_8hpp_a89420022991908207a506e30a8f44b6f}{memory\_detail::make\_ptr\_wrapper}}(ptr))\ );}
\DoxyCodeLine{00450\ }
\DoxyCodeLine{00451\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00452\ \ \ \ \ \}}
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00454\ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ \&\ bindingMap\ =\ \mbox{\hyperlink{classcereal_1_1detail_1_1_static_object}{detail::StaticObject<detail::OutputBindingMap<Archive>}}>::getInstance().map;}
\DoxyCodeLine{00455\ }
\DoxyCodeLine{00456\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ bindingMap.find(std::type\_index(ptrinfo));}
\DoxyCodeLine{00457\ \ \ \ \ \textcolor{keywordflow}{if}(binding\ ==\ bindingMap.end())}
\DoxyCodeLine{00458\ \ \ \ \ \ \ \mbox{\hyperlink{polymorphic_8hpp_a6a90af3fca239017978477a753225101}{UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}(save,\ \mbox{\hyperlink{util_8hpp_a3378464965f0d222673a51822c02f95e}{cereal::util::demangle}}(ptrinfo.name()))}
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \ \ \ \ binding-\/>second.unique\_ptr(\&ar,\ ptr.get(),\ tinfo);}
\DoxyCodeLine{00461\ \ \ \}}
\DoxyCodeLine{00462\ }
\DoxyCodeLine{00464\ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ Archive,\ \textcolor{keyword}{class}\ T,\ \textcolor{keyword}{class}\ D>\ \textcolor{keyword}{inline}}
\DoxyCodeLine{00465\ \ \ \textcolor{keyword}{typename}\ std::enable\_if<std::is\_polymorphic<T>::value,\ \textcolor{keywordtype}{void}>::type}
\DoxyCodeLine{00466\ \ \ \mbox{\hyperlink{macros_8hpp_a854de4fbe2b80753b27264b7dda740e8}{CEREAL\_LOAD\_FUNCTION\_NAME}}(\ Archive\ \&\ ar,\ std::unique\_ptr<T,\ D>\ \&\ ptr\ )}
\DoxyCodeLine{00467\ \ \ \{}
\DoxyCodeLine{00468\ \ \ \ \ std::uint32\_t\ nameid;}
\DoxyCodeLine{00469\ \ \ \ \ ar(\ \mbox{\hyperlink{helpers_8hpp_a45c4798e6de29f0f970b658771a4fbf0}{CEREAL\_NVP\_}}(\textcolor{stringliteral}{"{}polymorphic\_id"{}},\ nameid)\ );}
\DoxyCodeLine{00470\ }
\DoxyCodeLine{00471\ \ \ \ \ \textcolor{comment}{//\ Check\ to\ see\ if\ we\ can\ skip\ all\ of\ this\ polymorphism\ business}}
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keywordflow}{if}(\mbox{\hyperlink{polymorphic_8hpp_a6fa1b152a43117a484c4a11f382cc07a}{polymorphic\_detail::serialize\_wrapper}}(ar,\ ptr,\ nameid))}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keyword}{auto}\ binding\ =\ \mbox{\hyperlink{polymorphic_8hpp_a78e7f83c5bd8746da7563d1bdb145cdf}{polymorphic\_detail::getInputBinding}}(ar,\ nameid);}
\DoxyCodeLine{00476\ \ \ \ \ std::unique\_ptr<void,\ ::cereal::detail::EmptyDeleter<void>>\ result;}
\DoxyCodeLine{00477\ \ \ \ \ binding.unique\_ptr(\&ar,\ result,\ \textcolor{keyword}{typeid}(T));}
\DoxyCodeLine{00478\ \ \ \ \ ptr.reset(\textcolor{keyword}{static\_cast<}T*\textcolor{keyword}{>}(result.release()));}
\DoxyCodeLine{00479\ \ \ \}}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \textcolor{preprocessor}{\ \ \#undef\ UNREGISTERED\_POLYMORPHIC\_EXCEPTION}}
\DoxyCodeLine{00482\ \}\ \textcolor{comment}{//\ namespace\ cereal}}
\DoxyCodeLine{00483\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ CEREAL\_TYPES\_POLYMORPHIC\_HPP\_}}

\end{DoxyCode}
